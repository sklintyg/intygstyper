<!--

    Copyright (C) 2013 Inera AB (http://www.inera.se)

    This file is part of Inera Certificate Modules (http://code.google.com/p/inera-certificate-modules).

    Inera Certificate Modules is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    Inera Certificate Modules is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.

-->
<div class="header-fix-top">
  <div class="header-wrapper menucollapse" ng-hide="widgetState.collapsedHeader">
    <div id="wcHeader" wc-header default-active="index">
    </div>
  </div>
  <div class="header-fix-panel">
    <div class="header-fix-top-expand">
      <div class="header-fix-top-expand-wrapper">
        <button class="btn btn-link" ng-click="toggleHeader()"><span ng-if="widgetState.collapsedHeader">Visa</span><span ng-if="!widgetState.collapsedHeader">Dölj</span> meny</button>
      </div>
    </div>
    <a class="backlink-icon" href="/web/dashboard#/create" title="Tillbaka till Skriv intyg"></a>

    <h1 style="display: inline-block; margin-right: 20px;"><span message key="ts.label.certtitle"></span></h1>

    <div class="inline-block">
      <label class="control-label">{{cert.intygMetadata.patient.fullstandigtNamn}} - {{cert.intygMetadata.patient.personId}}</label>
    </div>
    <div class="form-group buttonbar">
      <button class="btn btn-info" ng-click="save()">Spara</button>
      <button class="btn btn-default btn-secondary" ng-click="discard()">Ta bort utkast</button>
      <button class="btn btn-default btn-secondary" ng-if="!widgetState.showComplete && !isComplete" ng-click="toggleShowComplete()">Visa vad som behöver kompletteras
      </button>
      <button class="btn btn-default btn-secondary" ng-if="widgetState.showComplete && !isComplete" ng-click="toggleShowComplete()">
        Dölj vad som behöver kompletteras
      </button>
    </div>
    <div ng-show="certForm.$pristine && isComplete"><strong>Status:</strong> Intyget är sparat.</div>
    <div ng-show="certForm.$pristine && !isComplete"><strong>Status:</strong> Intyget är sparat, men inte komplett</div>
    <div ng-show="certForm.$dirty"><strong>Status:</strong> Intyget är <strong>inte</strong> sparat.</div>
  </div>
</div><!-- top end -->

<!-- rli -->
<div class="edit-form" ng-class="{'collapsed' : widgetState.collapsedHeader}">

  <form name="certForm" novalidate autocomplete="off">

    <div class="alert alert-danger" ng-show="widgetState.showComplete && !isComplete" style="margin-right: 20px">
      <h3>Följande fält behöver kompletteras:</h3>
      <ul>
        <li ng-repeat="message in validationMessages"><span message key="{{message.message}}"></span></li>
      </ul>
    </div>

    <div id="certificate" class="row certificate">
      <div class="col-md-12 cert-body">


      </div>
      <!-- cert body -->

    </div>
    <!-- certificate -->

    <p>Specialistkompetens i:</p>

    <div ng-repeat="spec in cert.intygMetadata.skapadAv.specialiteter">
      {{spec}}
    </div>

    <button class="btn btn-success" ng-disabled="!isComplete">Signera intyget och skicka direkt till
      Transportstyrelsen
    </button>
  </form>
</div>
