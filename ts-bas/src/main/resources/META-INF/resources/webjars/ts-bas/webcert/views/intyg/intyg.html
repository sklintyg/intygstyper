<div class="weak-hidden" ng-class="{show: viewState.common.showTemplate}" ng-controller="ts-bas.IntygController">
  <div wc-spinner label="info.loadingcertificate" show-spinner="!viewState.common.doneLoading"
       show-content="viewState.common.doneLoading">

    <div ui-view="header"></div>

    <div ng-show="!viewState.common.activeErrorMessageKey">
      <div id="certificate" ng-class="{'certificate': true, 'revoked-certificate' : viewState.common.intyg.isRevoked}">
        <div class="row">
          <div class="col-md-12">
            <div class="cert-body">

              <!-- Patientens adressuppgifter -->
              <div wc-field field-label="ts-bas.label.patientadress" filled="true">
                <span class="cert-answer"><span id="patientpostadress">{{viewState.intygModel.grundData.patient.postadress}}</span><br><span id="patientpostnummer">{{viewState.intygModel.grundData.patient.postnummer}}</span> <span id="patientpostort">{{viewState.intygModel.grundData.patient.postort}}</span></span>
              </div>

              <!-- Intyget avser -->
              <div wc-field field-label="ts-bas.label.intygavser" filled="true">
                <span class="cert-answer" id="intygAvser">{{viewState.intygAvser}}</span>
              </div>

              <!-- Identitet -->
              <div wc-field field-label="ts-bas.label.identitet" filled="true">
                <span id="identitet"><span class="cert-answer" message key="ts-bas.label.identitet.{{viewState.intygModel.vardkontakt.idkontroll}}"></span></span>
              </div>

              <!-- 1 syn -->
              <div wc-field field-label="ts-bas.label.syn" filled="true">
                <!-- a -->
                <p>
                  <span message key="ts-bas.label.syn.synfaltsdefekter"></span>
                  <span id="synfaltsdefekter"><span class="cert-answer" message key="{{viewState.intygModel.syn.synfaltsdefekter | BoolToTextFilter}}"></span></span>
                </p>

                <!-- b -->
                <p>
                  <span message key="ts-bas.label.syn.nattblindhet"></span>
                  <span id="nattblindhet"><span class="cert-answer" message key="{{viewState.intygModel.syn.nattblindhet | BoolToTextFilter}}"></span></span>
                </p>

                <!-- c -->
                <p>
                  <span message key="ts-bas.label.syn.progressivogonsjukdom"></span>
                  <span id="progressivOgonsjukdom"><span class="cert-answer" message key="{{viewState.intygModel.syn.progressivOgonsjukdom | BoolToTextFilter}}"></span></span>
                </p>

                <!-- a-c message -->
                <div ng-show="achelptext === true" class="alert alert-info">
                  <span message key="ts-bas.helptext.synfunktioner.a-c"></span>
                </div>

                <!-- d -->
                <p>
                  <span message key="ts-bas.label.syn.diplopi"></span>
                  <span id="diplopi"><span class="cert-answer" message key="{{viewState.intygModel.syn.diplopi | BoolToTextFilter}}"></span></span>
                </p>

                <!-- e -->
                <p>
                  <span message key="ts-bas.label.syn.nystagmus"></span>
                  <span id="nystagmus"><span class="cert-answer" message key="{{viewState.intygModel.syn.nystagmus | BoolToTextFilter}}"></span></span>
                  viewState.intygModel

                <!-- f -->
                <p>
                  <span message key="ts-bas.label.syn.synskarpa"></span>
                </p>

                <table class="table table-condensed ts-table">
                  <tr>
                    <th></th>
                    <th>Utan korrektion</th>
                    <th>Med korrektion</th>
                    <th>Kontaktlinser</th>
                  </tr>
                  <tr>
                    <td>Höger öga</td>
                    <td id="hogerOgautanKorrektion">{{viewState.intygModel.syn.hogerOga.utanKorrektion | number : 1}}</td>
                    <td id="hogerOgamedKorrektion">{{viewState.intygModel.syn.hogerOga.medKorrektion | number : 1}}</td>
                    <td id="hogerOgakontaktlins"><span message key="{{viewState.intygModel.syn.hogerOga.kontaktlins | BoolToTextFilter}}"></span>
                    </td>
                  </tr>
                  <tr>
                    <td>Vänster öga</td>
                    <td id="vansterOgautanKorrektion">{{viewState.intygModel.syn.vansterOga.utanKorrektion | number : 1}}</td>
                    <td id="vansterOgamedKorrektion">{{viewState.intygModel.syn.vansterOga.medKorrektion | number : 1}}</td>
                    <td id="vansterOgakontaktlins"><span message key="{{viewState.intygModel.syn.vansterOga.kontaktlins | BoolToTextFilter}}"></span>
                    </td>
                  </tr>
                  <tr>
                    <td>Binokulärt</td>
                    <td id="binokulartutanKorrektion">{{viewState.intygModel.syn.binokulart.utanKorrektion | number : 1}}</td>
                    <td id="binokulartmedKorrektion">{{viewState.intygModel.syn.binokulart.medKorrektion | number : 1}}</td>
                    <td></td>
                  </tr>
                </table>

                <h3>Korrektionsglasens styrka</h3>
                <span message key="ts-bas.label.syn.8-dioptrier"></span>
                <span id="korrektionsglasensStyrka"><span class="cert-answer" message
                      key="{{viewState.intygModel.syn.korrektionsglasensStyrka | BoolToTextFilter}}"></span></span>
                <div class="alert alert-info" ng-show="viewState.intygModel.syn.korrektionsglasensStyrka == true">
                  <span message key="ts-bas.helptext.synfunktioner.8-dioptrier"></span>
                </div>
              </div>

              <!-- 2 -->
              <div wc-field field-label="ts-bas.label.horselbalans" filled="true">
                <p>
                  <span message key="ts-bas.label.horselbalans.balansrubbningar"></span>
                  <span id="horselBalansbalansrubbningar"><span class="cert-answer" message
                        key="{{viewState.intygModel.horselBalans.balansrubbningar | BoolToTextFilter}}"></span></span>
                </p>
                <p ng-show="viewState.intygModel.horselBalans.svartUppfattaSamtal4Meter != null">
                  <span message key="ts-bas.label.horselbalans.uppfatta-vanlig-samtalsstamma"></span>
                  <span id="horselBalanssvartUppfattaSamtal4Meter"><span class="cert-answer" message
                        key="{{viewState.intygModel.horselBalans.svartUppfattaSamtal4Meter | BoolToTextFilter}}"></span></span>
                </p>
              </div>

              <!-- 3 -->
              <div wc-field field-label="ts-bas.label.funktionsnedsattning" filled="true" class="print-pagebreak-after">

                <!-- a -->
                <p>
                  <span message key="ts-bas.label.funktionsnedsattning.funktionsnedsattning"></span>
            			<span id="funktionsnedsattning"><span class="cert-answer" message
                        key="{{viewState.intygModel.funktionsnedsattning.funktionsnedsattning | BoolToTextFilter}}"></span></span>
                </p>
                <p class="indent" ng-show="viewState.intygModel.funktionsnedsattning.funktionsnedsattning">
                  <span message key="ts-bas.label.view.funktionsnedsattning.beskrivning"></span><br />
                  <span id="funktionsnedsattningbeskrivning"><span class="cert-answer">{{viewState.intygModel.funktionsnedsattning.beskrivning}}</span></span>
                </p>

                <!-- b -->
                <p ng-show="viewState.intygModel.funktionsnedsattning.otillrackligRorelseformaga != null">
                  <span message key="ts-bas.label.funktionsnedsattning.rorelsformaga"></span>
            			<span id="funktionsnedsattningotillrackligRorelseformaga"><span class="cert-answer" message
                        key="{{viewState.intygModel.funktionsnedsattning.otillrackligRorelseformaga | BoolToTextFilter}}"></span></span>
                </p>

              </div>

              <!-- 4 -->
              <div wc-field field-label="ts-bas.label.hjartkarl" filled="true">
                <p>
                  <span message key="ts-bas.label.hjartkarl.hjart-karlsjukdom"></span><br>
            			<span id="hjartKarlSjukdom"><span class="cert-answer" message
                        key="{{viewState.intygModel.hjartKarl.hjartKarlSjukdom | BoolToTextFilter}}"></span></span>
                </p>
                <p>
                  <span message key="ts-bas.label.hjartkarl.hjarnskada-efter-trauma"></span><br>
            			<span id="hjarnskadaEfterTrauma"><span class="cert-answer" message
                        key="{{viewState.intygModel.hjartKarl.hjarnskadaEfterTrauma | BoolToTextFilter}}"></span></span>
                </p>
                <p>
                  <span message key="ts-bas.label.hjartkarl.riskfaktorer-stroke"></span><br>
            			<span id="riskfaktorerStroke"><span class="cert-answer" message
                        key="{{viewState.intygModel.hjartKarl.riskfaktorerStroke | BoolToTextFilter}}"></span></span>
                </p>
                <p class="indent" ng-show="viewState.intygModel.hjartKarl.riskfaktorerStroke">
                  <span message key="ts-bas.label.hjartkarl.riskfaktorer-stroke.beskrivning"></span><br />
                  <span id="beskrivningRiskfaktorer"><span class="cert-answer">{{viewState.intygModel.hjartKarl.beskrivningRiskfaktorer}}</span></span>
                </p>

              </div>

              <!-- 5 -->
              <div wc-field field-label="ts-bas.label.diabetes" filled="true">
                <p>
                  <span message key="ts-bas.label.diabetes.har-diabetes"></span>
                  <span id="harDiabetes"><span class="cert-answer" message key="{{viewState.intygModel.diabetes.harDiabetes | BoolToTextFilter}}"></span></span>
                </p>
                <div ng-show="viewState.intygModel.diabetes.harDiabetes">
                  <p>
                    <span message key="ts-bas.label.diabetes.diabetestyp"></span>
            			  <span id="diabetesTyp"><span class="cert-answer" message
                            key="ts-bas.label.diabetes.diabetestyp.{{viewState.intygModel.diabetes.diabetesTyp}}"></span></span>
                  </p>
                  <p ng-show="viewState.intygModel.diabetes.kost || viewState.intygModel.diabetes.tabletter || viewState.intygModel.diabetes.insulin">
                    <span message key="ts-bas.label.diabetes.view.behandling"></span><br>
                    <span id="kost"><span class="cert-answer" ng-show="viewState.intygModel.diabetes.kost" message
                          key="ts-bas.label.diabetes.behandling.kost"></span></span>
                    <span id="tabletter"><span class="cert-answer" ng-show="viewState.intygModel.diabetes.tabletter" message
                          key="ts-bas.label.diabetes.behandling.tabletter"></span></span>
                    <span id="insulin"><span class="cert-answer" ng-show="viewState.intygModel.diabetes.insulin" message
                          key="ts-bas.label.diabetes.behandling.insulin"></span></span>
                  </p>
                  <div class="alert alert-info" ng-show="viewState.intygModel.diabetes.insulin || viewState.intygModel.diabetes.tabletter">
                    <span message key="ts-bas.helptext.diabetes.tabletter-eller-insulin"></span>
                  </div>
                </div>

              </div>

              <!-- 6 -->
              <div wc-field field-label="ts-bas.label.neurologi" filled="true">
                <p>
                  <span message key="ts-bas.label.neurologi.neurologisksjukdom"></span>
            			<span id="neurologiskSjukdom"><span class="cert-answer" message
                        key="{{viewState.intygModel.neurologi.neurologiskSjukdom | BoolToTextFilter}}"></span></span>
                </p>

              </div>

              <!-- 7 -->
              <div wc-field field-label="ts-bas.label.medvetandestorning" filled="true">
                <p>
                  <span message key="ts-bas.label.medvetandestorning.medvetandestorning"></span>
            			<span id="medvetandestorning"><span class="cert-answer" message
                        key="{{viewState.intygModel.medvetandestorning.medvetandestorning | BoolToTextFilter}}"></span></span>
                </p>

                <p class="indent" ng-show="viewState.intygModel.medvetandestorning.medvetandestorning">
                  <span message key="ts-bas.label.medvetandestorning.beskrivning"></span><br />
                  <span id="medvetandestorningbeskrivning"><span class="cert-answer">{{viewState.intygModel.medvetandestorning.beskrivning}}</span></span>
                </p>
              </div>

              <!-- 8 -->
              <div wc-field field-label="ts-bas.label.njurar" filled="true">
                <span message key="ts-bas.label.njurar.nedsatt-njurfunktion"></span>
                <span id="nedsattNjurfunktion"><span class="cert-answer" message
                      key="{{viewState.intygModel.njurar.nedsattNjurfunktion | BoolToTextFilter}}"></span></span>

              </div>

              <!-- 9 -->
              <div wc-field field-label="ts-bas.label.kognitivt" filled="true">
                <span message key="ts-bas.label.kognitivt.sviktande-kognitiv-funktion"></span>
                <span id="sviktandeKognitivFunktion"><span class="cert-answer" message
                      key="{{viewState.intygModel.kognitivt.sviktandeKognitivFunktion | BoolToTextFilter}}"></span></span>

              </div>

              <!-- 10 -->
              <div wc-field field-label="ts-bas.label.somnvakenhet" filled="true">
                <span message key="ts-bas.label.somn-vakenhet.tecken-somnstorningar"></span>
                <span id="teckenSomnstorningar"><span class="cert-answer" message
                      key="{{viewState.intygModel.somnVakenhet.teckenSomnstorningar | BoolToTextFilter}}"></span></span>

              </div>

              <!-- 11 -->
              <div wc-field field-label="ts-bas.label.narkotikalakemedel" filled="true">
                <p>
                  <span message key="ts-bas.label.narkotika-lakemedel.tecken-missbruk"></span>
            			<span id="teckenMissbruk"><span class="cert-answer" message
                        key="{{viewState.intygModel.narkotikaLakemedel.teckenMissbruk | BoolToTextFilter}}"></span></span>
                </p>

                <p>
                  <span message key="ts-bas.label.narkotika-lakemedel.foremal-for-vardinsats"></span>
            			<span id="foremalForVardinsats"><span class="cert-answer" message
                        key="{{viewState.intygModel.narkotikaLakemedel.foremalForVardinsats | BoolToTextFilter}}"></span></span>
                </p>

                <div ng-show="viewState.intygModel.narkotikaLakemedel.foremalForVardinsats || viewState.intygModel.narkotikaLakemedel.teckenMissbruk">
                  <p>
                    <span message key="ts-bas.label.narkotika-lakemedel.behov-provtagning"></span>
	            			<span id="provtagningBehovs"><span class="cert-answer" message
                          key="{{viewState.intygModel.narkotikaLakemedel.provtagningBehovs | BoolToTextFilter}}"></span></span>
                  </p>
                  <p>
                  <div class="alert alert-info">
                    <span message key="ts-bas.helptext.narkotika-lakemedel.provtagning"></span>
                  </div>
                  </p>
                </div>

                <p>
                  <span message key="ts-bas.label.narkotika-lakemedel.lakarordinerat-lakemedelsbruk"></span>
            			<span id="lakarordineratLakemedelsbruk"><span class="cert-answer" message
                        key="{{viewState.intygModel.narkotikaLakemedel.lakarordineratLakemedelsbruk | BoolToTextFilter}}"></span></span>
                </p>

                <p class="indent" ng-show="viewState.intygModel.narkotikaLakemedel.lakarordineratLakemedelsbruk">
                  <span message key="ts-bas.label.narkotika-lakemedel.beskrivning"></span><br />
                  <span id="lakemedelOchDos"><span class="cert-answer">{{viewState.intygModel.narkotikaLakemedel.lakemedelOchDos}}</span></span>
                </p>

              </div>

              <!-- 12 -->
              <div wc-field field-label="ts-bas.label.psykiskt" filled="true">
                <span message key="ts-bas.label.psykiskt.psykisksjukdom"></span>
                <span id="psykiskSjukdom"><span class="cert-answer" message key="{{viewState.intygModel.psykiskt.psykiskSjukdom | BoolToTextFilter}}"></span></span>
              </div>

              <!-- 13 -->
              <div wc-field field-label="ts-bas.label.utvecklingsstorning" filled="true">
                <p>
                  <span message key="ts-bas.label.utvecklingsstorning.psykisk-utvecklingsstorning"></span>
            			<span id="psykiskUtvecklingsstorning"><span class="cert-answer" message
                        key="{{viewState.intygModel.utvecklingsstorning.psykiskUtvecklingsstorning | BoolToTextFilter}}"></span></span>
                </p>
                <p>
                  <span message key="ts-bas.label.utvecklingsstorning.har-syndrom"></span>
            			<span id="harSyndrom"><span class="cert-answer" message
                        key="{{viewState.intygModel.utvecklingsstorning.harSyndrom | BoolToTextFilter}}"></span></span>
                </p>
              </div>

              <!-- 14 -->
              <div wc-field field-label="ts-bas.label.sjukhusvard" filled="true">
                <p>
                  <span message key="ts-bas.label.sjukhusvard.sjukhus-eller-lakarkontakt"></span>
            		  <span id="sjukhusEllerLakarkontakt"><span class="cert-answer" message
                          key="{{viewState.intygModel.sjukhusvard.sjukhusEllerLakarkontakt | BoolToTextFilter}}"></span></span>
                </p>
                <p class="indent" ng-show="viewState.intygModel.sjukhusvard.sjukhusEllerLakarkontakt">
                  <span message key="ts-bas.label.sjukhusvard.tidpunkt"></span>
                  <span class="cert-answer" id="tidpunkt">{{viewState.intygModel.sjukhusvard.tidpunkt}}</span><br />

                  <span message key="ts-bas.label.sjukhusvard.vardinrattning"></span>
                  <span class="cert-answer" id="vardinrattning">{{viewState.intygModel.sjukhusvard.vardinrattning}}</span><br />

                  <span message key="ts-bas.label.sjukhusvard.anledning"></span>
                  <span class="cert-answer" id="sjukhusvardanledning">{{viewState.intygModel.sjukhusvard.anledning}}</span><br />
                </p>
              </div>

              <!-- 15 -->
              <div wc-field field-label="ts-bas.label.medicinering" filled="true">
                <p>
                  <span message key="ts-bas.label.medicinering.stadigvarande-medicinering"></span>
            		  <span id="stadigvarandeMedicinering"><span class="cert-answer" message
                          key="{{viewState.intygModel.medicinering.stadigvarandeMedicinering | BoolToTextFilter}}"></span></span>
                </p>
                <p class="indent" ng-show="viewState.intygModel.medicinering.stadigvarandeMedicinering">
                  <span message key="ts-bas.label.medicinering.beskrivning"></span><br />
                  <span id="medicineringbeskrivning"><span class="cert-answer">{{viewState.intygModel.medicinering.beskrivning}}</span></span>
                </p>
              </div>

              <!-- 16 ovrigt -->
              <div wc-field field-label="ts-bas.label.ovrigkommentar" filled="true">
                <p ng-show="viewState.intygModel.kommentar.length > 0">
                  <span id="kommentar"><span class="cert-answer">{{viewState.intygModel.kommentar}}</span></span>
                </p>

                <p class="cert-answer" ng-show="!viewState.intygModel.kommentar" id="kommentarEjAngivet">
                  <span message key="ts-bas.label.bedomning-info-ej-angivet"></span>
                </p>
              </div>

              <!-- Bedomning -->
              <div wc-field field-label="ts-bas.label.bedomning" filled="true">
                <div ng-show="!viewState.intygModel.bedomning.kanInteTaStallning">
                  <span message key="ts-bas.label.bedomning-info-alt-1"></span>

                  <p>
                    <span class="cert-answer" id="bedomning">{{viewState.bedomning}}</span>
                  </p>
                </div>

                <div ng-show="viewState.intygModel.bedomning.kanInteTaStallning">
                  <span id="bedomningKanInteTaStallning"><span class="cert-answer" message key="ts-bas.label.bedomning.kan-inte-ta-stallning"></span></span><br><br>
                </div>

                <div>
                  <span message key="ts-bas.label.bedomning-info-undersokas-med-specialkompetens"></span><br>
                  <span class="cert-answer" ng-show="viewState.intygModel.bedomning.lakareSpecialKompetens.length > 0" id="lakareSpecialKompetens">{{viewState.intygModel.bedomning.lakareSpecialKompetens}}</span>
                  <span id="lakareSpecialKompetensEjAngivet"><span class="cert-answer" ng-show="!viewState.intygModel.bedomning.lakareSpecialKompetens" message
                        key="ts-bas.label.bedomning-info-ej-angivet"></span></span>
                </div>
              </div>

              <!-- Vardenhet underskrift -->
              <div class="infobox">
                <h3>
                  <span message key="common.label.ovanstaende-har-bekraftats"></span>
                </h3>
                <h4>
                  <span message key="common.date"></span>
                </h4>
                <p id="signeringsdatum">{{viewState.intygModel.grundData.signeringsdatum | date:'longDate'}}</p>
                <h4>
                  <span message key="ts-bas.label.kontakt-info"></span>
                </h4>
                <span id="vardperson_namn">{{viewState.intygModel.grundData.skapadAv.fullstandigtNamn}}</span><br>
                <span id="vardperson_enhetsnamn">{{viewState.intygModel.grundData.skapadAv.vardenhet.enhetsnamn}}</span><br>
                <span id="vardenhet_postadress">{{viewState.intygModel.grundData.skapadAv.vardenhet.postadress}}</span><br>
                <span id="vardenhet_postnummer">{{viewState.intygModel.grundData.skapadAv.vardenhet.postnummer}}</span> <span id="vardenhet_postort">{{viewState.intygModel.grundData.skapadAv.vardenhet.postort}}</span><br>
                <span id="vardenhet_telefonnummer">{{viewState.intygModel.grundData.skapadAv.vardenhet.telefonnummer}}</span><br>
              </div>

            </div>
            <!-- cert body -->
          </div>
        </div>
      </div>
    </div>
    <!-- entire cert -->
  </div>
  <!--  spinner end -->
</div>
